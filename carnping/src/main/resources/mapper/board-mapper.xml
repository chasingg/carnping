<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "mybatis-3-mapper.dtd" >
<mapper namespace="boardMapper">

	<resultMap type="Board" id="boardResultMap">
		<result column="BOARD_NO" property="boardNo"/>
		<result column="BOARD_TITLE" property="boardTitle"/>
		<result column="MEM_NO" property="memNo"/>
		<result column="CREATE_DATE" property="createDate"/>
		<result column="LOCATION" property="location"/>
		<result column="BOARD_CONTENT" property="boardContent"/>
		<result column="COUNT" property="count"/>
		<result column="STATUS" property="status"/>
		<result column="BOARD_ORIGIN_IMG1" property="boardOriginImg1"/>
		<result column="BOARD_ORIGIN_IMG2" property="boardOriginImg2"/>
		<result column="BOARD_ORIGIN_IMG3" property="boardOriginImg3"/>
		<result column="BOARD_ORIGIN_IMG4" property="boardOriginImg4"/>
		<result column="BOARD_ORIGIN_IMG5" property="boardOriginImg5"/>
		<result column="BOARD_CHANGE_IMG1" property="boardChangeImg1"/>
		<result column="BOARD_CHANGE_IMG2" property="boardChangeImg2"/>
		<result column="BOARD_CHANGE_IMG3" property="boardChangeImg3"/>
		<result column="BOARD_CHANGE_IMG4" property="boardChangeImg4"/>
		<result column="BOARD_CHANGE_IMG5" property="boardChangeImg5"/>
		<result column="MEM_ID" property="memId"/>
		
	</resultMap>


	<resultMap type="Comment" id="commentResultMap">
		<result column="RE_NO" property="reNo"/>
		<result column="REF_NO" property="refNo"/>
		<result column="MEM_NO" property="memNo"/>
		<result column="CREATE_DATE" property="createDate"/>
		<result column="COMM_CONTENT" property="commContent"/>
	</resultMap>
	
	<select id="selectFreeBoardList" resultMap="boardResultMap">
		select
			       board_no,
			       board_change_img1,
			       board_title,
			       mem_id,
			       location,
			       phone
			  from fboard f
			  join board_img using(board_no)
	  		  join member m using(mem_no)
	          where f.status = 'Y'
	</select>
	
	<select id="selectLastest" resultMap="boardResultMap">
		select
		       board_no,
		       board_change_img1,
		       board_title,
		       mem_id,
		       location,
		       phone,
		       create_date
		  from fboard
		  join board_img using (board_no)
		  join member using(mem_no)
		 order 
		    by create_date desc
	</select>
	
	<select id="selectFreeBoardDetail" resultMap="boardResultMap">
		select 
		       board_no,
		       board_change_img1,
		       board_change_img2,
		       board_change_img3,
		       board_change_img4,
		       board_title,
		       mem_id,
		       to_char(create_date, 'YYYY-MM-DD') as "create_date",
		       location,
		       board_content
		  from fboard
		  join board_img using (board_no)
		  join member using (mem_no)
		 where board_no = #{ boardNo }
	</select>
	
	<insert id="insertFreeBoard">
		insert
 		  into fboard
		     (
		       board_no,
		       board_title,
		       mem_no,
		       location,
		       board_content
		     )
		values
		     (
		       'BRD'||seq_brd_no.nextval,
		       #{boardTitle},
		       'MEM10000',
		       #{location},
		       #{boardContent}
		     ) 
	</insert>
	
	<insert id="insertBoardImage">
		insert
		  into board_img
		     (
		       board_no,
		       board_origin_img1,
		       board_change_img1,
		       board_origin_img2,
		       board_change_img2,
		       board_origin_img3,
		       board_change_img3,
		       board_origin_img4,
		       board_change_img4,
		       board_origin_img5,
		       board_change_img5
		     )
		values
		     (
		       'BRD'||seq_brd_no.currval,
		       #{boardOriginImg1},
		       #{boardChangeImg1},
		       #{boardOriginImg2},
		       #{boardChangeImg2},
		       #{boardOriginImg3},
		       #{boardChangeImg3},
		       #{boardOriginImg4},
		       #{boardChangeImg4},
		       #{boardOriginImg5},
		       #{boardChangeImg5}
		     )
	</insert>
	
	<update id="deleteBoard">
		update
			   fboard
		   set status = 'N'
		 where board_no = #{boardNo}
	</update>
	
	
	
</mapper>
